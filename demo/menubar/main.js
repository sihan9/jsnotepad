var $menubar=function(){var d,r=$('<div class="notepad-menubar"></div>'),u=[],a=-1;return{show:function(t){d=t,function(){for(var t=$('<ul class="menu-title"></ul>'),e=0;e<d.length;e++){var l=$('<li class="title"></li>');l.html(d[e].title),l.attr("dataid",e),t.append(l),l.click(function(){var t=this.getAttribute("dataid");a=-1==a?(u[t][0].style.display="inline-block",t):a==t?(u[t][0].style.display="none",-1):(u[a][0].style.display="none",u[t][0].style.display="inline-block",t)})}r.append(t)}(),function(){for(var t=0;t<d.length;t++){for(var e=$('<ul class="menus"></ul>'),l=d[t].menuItems,a=0;a<l.length;a++)if("hr"!==l[a].title){var s=$('<li class="menu-item"></li>');if(s.html(l[a].title),s.attr("x",t),s.attr("y",a),""!==l[a].shortcut){var i=$('<span class="shortcut"></span>');i.html(l[a].shortcut),s.append(i)}l[a].enabled||s.addClass("disabled"),e.append(s),s.click(function(){if(!$(this).hasClass("disabled")){var t=this.getAttribute("x"),e=this.getAttribute("y");u[t].css({display:"none"}),active=-1,d[t].menuItems[e].handler()}})}else{var n=$('<li class="menu-hr"></li>');e.append(n)}e[0].style.width=d[t].width,e[0].style.left=d[t].left,e[0].style.display="none",r.append(e),u.push(e)}}(),$("body").append(r)}}};